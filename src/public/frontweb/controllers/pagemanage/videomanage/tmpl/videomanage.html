<div class="page-inner">
    <div class="table-action">
        <div class="pull-left">
            <button type="button" data-toggle="modal" class="btn btn-primary" ng-click="createOrEdit('create')">
                <i class="icon-aw-add-to2"></i>{{'cn.videomanage.btnGroup.create'|translate}}</button>
            <button type="button" data-toggle="modal" class="btn btn-info" ng-disabled="!canEdit" ng-click="createOrEdit('edit')">
                <i class="icon-aw-modify"></i>{{'cn.videomanage.btnGroup.edit'|translate}}</button>
            <button type="button" data-toggle="modal" class="btn btn-info" ng-disabled="!canDelete" ng-click="delete(checkedItems)">
                <i class="icon-aw-delete"></i>{{'cn.videomanage.btnGroup.delete'|translate}}</button>
        </div>
        <div class="pull-right">
            <div class="search-box">
                <form name="searchForm" novalidate ng-keyup="applyGlobalSearch()">
                    <button class="btn" type="submit" ng-disabled="searchForm.$invalid">
                        <i class="icon-aw-search"></i>
                    </button>
                    <input type="text" class="form-control" autocomplete="off" maxlength="128" name="searchTerm" ng-model="globalSearchTerm"
                        placeholder="{{'cn.action.search'|translate}}" />
                </form>
            </div>
            <button class="btn btn-renovat" ng-click="refresh()">
                <i class="icon-aw-refresh"></i>
            </button>   
            <!-- <setting title-data="videomanageTitleData" site-title="videomanageName" table-data="classList" search-tearm="videomanageSearchTerm(obj)"></setting> -->
        </div>
    </div>
    <div class="table-content">
        <table ng-table="tableParams" class="table" template-pagination="/public/tmpl/ngtablepagination.html">
            <colgroup>
                <col width="4%">
                <col width="15%">
                <col width="60%">
                <col width="25%">
            </colgroup>
            <tr ng-repeat="item in $data">
                <td header="'headerCheckbox.html'">
                    <label class="checkbox">
                        <input type="checkbox" ng-model="checkboxes.items[item.id]"/>
                        <i class="icon-aw-square"></i>
                    </label>
                </td>
                <td data-title="videomanageTitles.name" sortable="'videoName'">
                    <a ng-href="#/pagemanage/video?id={{item.id}}">{{item.videoName}}</a>
                </td>
                <td data-title="videomanageTitles.desc" sortable="'description'"><span class="word-break">{{item.description}}</span></td>
                <td data-title="videomanageTitles.download" sortable="'videoUrl'"><span class="word-break">{{item.videoUrl}}</span></td>
                <tr ng-if="$data.length==0">
                    <td colspan="8">
                        <loading-data data="$data"></loading-data>
                    </td>
                </tr>
            </tr>
        </table>
    </div>
    <div ng-controller="detailCtrl">
        <pane class="detail-body" animation="animation">
            <div class="tab-content">
                <div class="detail-row">
                    <div class="detail-title">
                        <a class="an-close" ng-href="#/pagemanage/video">
                            <i class="icon-aw-mail-reply"></i>
                        </a>
                        <span>{{detailInfo.videoName}}{{"cn.common.detail"|translate}}</span>
                    </div>
                    <div class="detail-info">
                        <div class="teauser-content video-content clearfix">
                            <div class="left-teauser">
                                <img ng-src="{{detailInfo.picUrl}}" alt="">
                            </div>
                            <div class="right-teauser">
                                <div class="detail-item"><span class="detail-item-title">视频名称：</span><span class="detail-item-title">{{detailInfo.videoName}}</span></div>
                                <div class="detail-item"><span class="detail-item-title">视频地址：</span><span class="detail-item-title">{{detailInfo.videoUrl}}</span></div>
                                <div class="detail-item clearfix"><div class="detail-item-title">视频描述：</div><div class="detail-item-title item-description">{{detailInfo.description}}</div></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </pane>
    </div>
</div>
<script type="text/ng-template" id="headerCheckbox.html">
    <label class="checkbox">
        <input type="checkbox" ng-model="checkboxes.checked" class="select-all"/>
        <i class="icon-aw-square"></i>
    </label>
</script>
<script type="text/ng-template" id="createDatas.html">
    <div class="modal-common">
        <div class="modal-header">
            <button type="button" class="close" ng-click="$dismiss()">×</button>
            <h3 class="modal-title clearfix">{{modalTitle}}</h3>
        </div>
        <div class="modal-body">
            <form name="createItemForm" class="model-form" novalidate>
                <div class="control-group">
                    <label class="control-label">
                        <span class="red">*</span>{{'cn.videomanage.dataTitles.name'|translate}}：</label>
                    <div class="controls">
                        <input class="form-controls" name="name" ng-model="formData.videoName" placeholder="{{'cn.videomanage.placeholder.name'|translate}}" ng-maxlength='32' required ng-change="changeName(formData.videoName)"/>
                        <div class="error" ng-messages="(createItemFormValid ||createItemForm.name.$dirty) && createItemForm.name.$error">
                            <span class="error" ng-message="maxlength">{{'cn.errors.maxlength32'|translate}}</span>
                            <span class="error" ng-message="required">{{'cn.message.required'|translate}}</span>
                        </div>
                        <div class="error" ng-if="hadSameName">
                            <span class="error">{{'cn.videomanage.checkInfo.sameName'|translate}}</span>
                        </div>
                    </div>
                </div>  
                <div class="control-group">
                    <label class="control-label">
                        <span class="red">*</span>{{'cn.videomanage.dataTitles.download'|translate}}：</label>
                    <div class="controls">
                        <input class="form-controls" name="download" ng-model="formData.videoUrl" placeholder="{{'cn.videomanage.placeholder.download'|translate}}" ng-maxlength='200' required/>
                        <div class="error" ng-messages="(createItemFormValid ||createItemForm.download.$dirty) && createItemForm.download.$error">
                            <span class="error" ng-message="maxlength">{{'cn.errors.maxlength200'|translate}}</span>
                            <span class="error" ng-message="required">{{'cn.message.required'|translate}}</span>
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">
                        <span class="red" ng-if='redSpan'>*</span>{{'cn.pathlist.model.pic'|translate}}：
                    </label>
                    <div class="controls">
                        <div class="upload-file">
                            <div class="input-group">
                                <input type="text" class="form-control" name="filePath" readonly ng-model="formData.filePath" placeholder="{{'cn.pathlist.placeholder.chooseImg'|translate}}" required>
                                <span class="btn-file">
                                    <input type="file" accept="image/png,image/jpeg" ng-model="formData.file" name="file" class="file" ng-change="change($event)" onchange="angular.element(this).scope().fileChanged(this)"/>
                                    <button class="btn btn-primary">{{'cn.pathlist.model.chooseimg'|translate}}</button>
                                </span>
                            </div>
                        </div>
                        <div class="error" ng-messages="(createItemFormValid ||createItemForm.filePath.$dirty) && createItemForm.filePath.$error">
                            <span class="error" ng-message="required">{{'cn.teauser.chooseimg'|translate}}</span>
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">
                        {{'cn.pathlist.model.preview'|translate}}：
                    </label>
                    <div class="controls">
                        <div class="img-preview" ng-if="!imgChecked&&picUrl">
                            <img ng-src="{{picUrl}}" id="imgContent">
                        </div>
                        <span ng-if="imgChecked&&!picUrl" class="val">{{'cn.pathlist.model.noImg'|translate}}</span>
                        <span class="img-tips">{{helpMessage}}</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">
                        {{'cn.videomanage.dataTitles.desc'|translate}}：</label>
                    <div class="controls">
                        <textarea class="form-controls" name="desc" ng-model="formData.description" placeholder="{{'cn.videomanage.placeholder.desc'|translate}}" ng-maxlength='200' ></textarea>
                        <div class="error" ng-messages="(createItemFormValid ||createItemForm.desc.$dirty) && createItemForm.desc.$error">
                            <span class="error" ng-message="maxlength">{{'cn.errors.maxlength200'|translate}}</span>
                        </div>
                    </div>
                </div>  
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-info" ng-disabled="!canClick" ng-click="confirmCreate(createItemForm)">{{'cn.action.ok'|translate}}</button>
            <button type="button" class="btn btn-default" ng-click="$dismiss()">{{'cn.action.cancel'|translate}}</button>
        </div>
    </div>
</script>
